apply plugin: 'groovy'
apply plugin: 'maven'

description = 'Gradle Buster plugin for running busterjs tests'
group = 'org.gradle.buster'
version = '0.1.0'

repositories {
	mavenCentral()
}

dependencies {
	compile gradleApi()
	groovy localGroovy()

	testCompile 'org.spockframework:spock-core:0.7-groovy-1.8', 'cglib:cglib-nodep:2.2.2'
	
}

artifacts {
	archives jar
}


uploadArchives {
    repositories.mavenDeployer {
        repository(url: "https://api.bintray.com/maven/rundis/maven/gradle-buster-plugin") {
            authentication (
                userName:  bintray_username,
                password:  bintray_api_key
            )
        }
    }
}

/*publishing {
    publications {
        mavenJava(MavenPublication) {
            from components.java
        }
    }
    repositories{
        maven {
            url https://api.bintray.com/content/rundis/maven/gradle-buster-plugin'
            credentials {
                username = bintray_username
                password = bintray_api_key
            }
        }
    }
} */

sourceSets {
    integrationTest {
        groovy {
            srcDir 'src/integrationtest/groovy'
        }
        resources {
            srcDir 'src/integrationtest/resources'
        }
        compileClasspath += sourceSets.test.runtimeClasspath
    }
}

task integrationTest(type: Test) {
    description = "Runs Integration Tests"
    dependsOn 'jar'
    testClassesDir = sourceSets.integrationTest.output.classesDir
    classpath += sourceSets.integrationTest.runtimeClasspath
}
build.dependsOn integrationTest



task wrapper(type: Wrapper) {
    gradleVersion = '1.6'
}
